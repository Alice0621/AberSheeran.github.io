<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>仗剑不饮酒</title>
</head>

<style>
    @import url(https://fonts.googleapis.com/earlyaccess/cwtexkai.css);

    @media (min-width: 900px) {
        .timeline{
            margin: auto;
        }
    }
    @media (max-width: 900px) {
        .timeline{
            margin-left: 25px;
        }
        .message{
            margin-right: 40px;
        }
    }
    .timeline{
        font-family: ‘cwTeXKai’, serif;
        position: relative;
        border-left:13px solid #CCCCFF;
        max-width: 800px;
        padding-top: 60px;
    }
    .timeline a:link{
        text-decoration:none;
    }
    .timeline a:visited{
        text-decoration:none;
    }
    .timeline a:hover{
        text-decoration:none;
    }
    .timeline a:active{
        text-decoration:none;
    }
    .timeline .node{
        border-radius: 100%;
        background-color: lightskyblue;
        width: 50px;
        height: 50px;
        position: relative;
        left: -32px;
        font-weight: 600;
        line-height: 50px;
        text-align: center;
    }
    .timeline .message {
        position: relative;
        min-height: 20px;
        background: #FFFFFF;
        border-radius: 5px;
        word-break: break-all;
        font-size: 18px;
        color: black;
        padding: 10px;
        left: 22px;
        top: -53px;
    }
    /* before标签用来作气泡,后改成白色背景,故放弃
    .timeline .message::before {
        content: "";
        display: inline;
        position: absolute;
        width: 0;
        height: 0;
        float: left;
        border: 12px solid transparent;
        border-right-color: #FFFFFF;
        top: 1px;
        left: 1px;
    }
    */
    .timeline .message .title{
        font-size: 27px;
        font-weight: 400;
        border: 2px solid transparent;
        border-bottom-color: deepskyblue;
        margin-bottom: 5px;
    }
    .timeline .message .summary{
        max-height: 267px;
        overflow: hidden;
        font-weight: 500;
        padding-bottom: 7px;
        display: none;
        border: 2px solid transparent;
        border-bottom-color: deepskyblue;
    }
    .timeline .message .tags{
        margin-top: 7px;
        color: #CCCCFF;
    }
    .timeline .message .tags .time{
        float: right;
        color: darkturquoise;
    }
@-webkit-keyframes rotate{
	from{-webkit-transform:rotate(0deg)}
	to{-webkit-transform:rotate(360deg)}
}
@-moz-keyframes rotate{
	from{-moz-transform:rotate(0deg)}
	to{-moz-transform:rotate(360deg)}
}
@-ms-keyframes rotate{
	from{-ms-transform:rotate(0deg)}
	to{-ms-transform:rotate(360deg)}
}
@-o-keyframes rotate{
	from{-o-transform:rotate(0deg)}
	to{-o-transform:rotate(360deg)}
}
</style>
<body>
    <div id="loading" style="width:100px;height:100px;margin:100px auto;animation: 9.5s linear 0s normal none infinite rotate;-webkit-animation:9.5s linear 0s normal none infinite rotate;">
        <img src="data:image/png;base64,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">
    </div>
<div id="main">
    <div class="timeline" v-for="blog in blogs">
        <div class="node">
            <i class="fa"></i>
        </div>
        <div class="message">
            <div class="title" v-bind:href="[ blog.link ]">
                {{ blog.title }}
            </div>
            <div class="summary">
                {{ blog.summary }}
            </div>
            <div class="tags">
                <div class="time">{{ blog.time }}</div>
            </div>
        </div>
    </div>
</div>



<div id="sidebar">
    <div id="introduction">

    </div>
</div>

</body>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.2.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script>
    //请求锁, true时不再请求页面
    var get_lock = false;
    //请求结果Array, 用于vue渲染
    var blogs = []
    //将页面内容填充到有滚动条为止
    $(window).ready(function(){
        while($(document).height() <= $(window).height())
        {
           if(get_lock){
               break;
           }
           get_more_blog();
        }
        $("#loading").remove()
    });
    //滚动到底,请求剩余数据
    $(window).scroll(function(){
        if(!get_lock)
        {
            if($(this).scrollTop() + $(this).height() == $(document).height())
            {
    　　         get_more_blog();
    　　     }
        }
    });
    //预览的展开和回缩
    $(document).on("click", ".node", function(){
       $(this).next().children(".summary").fadeToggle();
    });
    //页面跳转
    $(document).on("click", ".title", function(){
        window.open($(this).attr("href"));
    });
    //vue 渲染页面
    new Vue({
        el:"#main",
        data:{
            blogs
        }
    })
</script>
<script>
    var date = new Date(),
        year = date.getFullYear(),
        month = date.getMonth()+1;
    if(month <= 9)
    {
        month = "0" + month;
    }
    //初始化请求页面
    var url = "/"+year+"/"+month+"/index.json"
    //将url置为下一个url
    function next_url()
    {
        var url_year = url.split("/")[1];
        var url_month = url.split("/")[2];
        if(url_year == "2017" && url_month == "07")
        {
            get_lock = true;
        }
        else{
            url_month = url_month-1;
            if (url_month <= 0)
            {
                url_month = "12";
                url_year = url_year-1;
            }
            else
            {
                if(url_month <= 9)
                {
                    url_month = "0" + url_month;
                }
            }
            url = "/" + url_year + "/" + url_month + "/index.json";
        }
    }
    //请求更多的博文
    function get_more_blog(){
        $.ajax({
            type : "GET",
            url : url,
            async: false,
            success:function(datas){
                next_url();
                for (var i=0; i<datas.length; i++){
                    blogs.push(datas[i]);
                }
            },
            error: function(){
                next_url();
            }
        });
    }
</script>
</html>
