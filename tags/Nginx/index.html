<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>仗剑不饮酒</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/STATIC/css/normalize.css">
    <link rel="stylesheet" href="/STATIC/css/notosanss.css">
</head>
<style>
    #loading{
        height: 100px;
        width: 100px;
        margin: auto;
        display: flex;
        justify-content: center;
        align-content: center;
    }
    @keyframes spaning
    {
        0%   {transform: rotate(0deg)}
        50%   {transform: rotate(180deg)}
        100%   {transform: rotate(360deg)}
    }
    #loading div{
        width: 30px;
        height: 30px;
        border-radius: 100%;
        border-top: 7px black solid;
        border-bottom: 7px black solid;
        border-left: 7px #eee solid;
        border-right: 7px #eee solid;
        margin: auto;
        animation: spaning 2s infinite linear;
    }
    article{
        display: none;
    }
</style>
<body>

<header>
    <nav>
        <a href="/" id="home" target="_blank"><img src="/portrait.ico" alt="Aber Sheeran" id="portrait"></a>
        <div class="items">
            <div class="item">
                <a href="/about.html" target="_blank">
                    关于
                </a>
            </div>
            <div class="item">
                <a href="/about.html" target="_blank">
                    联系
                </a>
            </div>
            <div class="item">
                <a href="/about/pay.html" target="_blank">
                    赞助
                </a>
            </div>
        </div>
    </nav>
</header>

<main>
    <section>
        <article v-for="blog in blogs">
            <a class="title" v-bind:href="['/articles/' + blog.permalink +'/']" target="_blank">{{ blog.title }}</a>
            <summary v-bind:href="['/articles/' + blog.permalink +'/']">{{ blog.summary }}</summary>
            <aside>
                <div class="tags">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIpSURBVGhD7ZlNS1VBGICvi0Iqsm+Sora66wP37d20DjcR5E4XLoo2mSFRIRIR/oKWgTsXrRIDQSmIShHJdWHoVjDsee0MvBwOed9z5+MI88CDnOGemXm4Z9TLbWUymUymYAzfd+hxTMpj3PNgDybDV4SYLKQcsYHDeL9NR1HfnySkKuIqWpCN6znk+iieLnkEg+AjQqgKuVMaEwfRO3UjbuEI6scnWUjdiH7cRbnnrQwUJAnp5HG6ie6+WRkoqApxZ+RbMSZ6C/FxJoZwCi/vX/2jKsTxBd24lxBfB7uKaCEhI4QoIaEjhOAhMSKEoCGxIoRgITEjhHuo1/MSEjviLv5Bt94v7EZHrZDUEb/xOmrMIQ/R3SA2IUJodEi7EUKtR2sc3U1iiBhLhPAd3WtNhz1kjDViAvVeTCFCiBhrxFPUe/iBvWjGZ4w1YhL12ut4BWvjI8Ya8Qz1mmuo/+WvTScx1ojnqNdaxUvojTox1ogXqNdYwVpn4iAsMdaIl6jnll+5FzEY7cRYI+Rjr57zK17A4PwvxhLRhdOo55K/4ucxGlUxD9AS8Qr1HJ/xHEanHKO1RnzCs5iMqpiDIl6jfv0ynsHk6JhyRF/xU5CIN6gjlvAUNoZH+BN1xBPcwdsoETOoIxZRf6RtDPrxkIPvNiwxc+pa/IiNjChzDTdRb965gCfx0HADt1BHzOMJPHQM4DZKxAdM/m1tJ8g78w6P7V9lMpmItFp/AeHfxal8moBYAAAAAElFTkSuQmCC">
                    <span class="tag" v-for="tag in blog.tags">
                        <a v-bind:href="['/tags/'+ tag + '/']" target="_blank">{{ tag }}</a>
                    </span>
                </div>

                <i class="block"></i>
                <div class="corpus">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAoklEQVRYR2NkGGDAOMD2M2BzQAIDA0M/AwODAJUc94GBgaGQgYFhATbzsDkApIGfSpbDjAGZKUisA/5DFVIrevCah82SUQeMhsBoCIyGwGgIjIbAaAiMhsBoCAyaEKByuxRrCxyrICwEBtwBhFrFxEYVzVrFNHMALTomH3H1tLAFswO0GyVPpUTwkIGBAdTdO0Bsz4hK9hJnDKGERpwpFKgCALWxOiH0B0d7AAAAAElFTkSuQmCC">
                    <span>
                        <a v-bind:href="['/corpus/'+ blog.corpus + '/']" target="_blank">{{ blog.corpus }}</a>
                    </span>
                </div>

                <i class="block"></i>
                <time>
                    {{ blog.date }}
                </time>
            </aside>
        </article>
        <div id="loading"><div></div></div>
        <div id="load_error" style="text-align: center; padding: 30px; width: 300px; margin: auto; display: none;"></div>
    </section>
    <noscript><p style="padding:20px;margin:auto;">请启用Javascript以查看使用Vue.js渲染的文章列表</p></noscript>
</main>

<footer>
    <div style="margin:0 auto 10px">
        <a href="https://github.com/AberSheeran" target="_blank">
            <img src="https://png.icons8.com/ios/50/000000/github.png"/>
        </a>
    </div>
    <p>Copyright&copy;2018</p>
    <p>Designed by <a href="https://github.com/AberSheeran/maltose" target="_blank" style="text-decoration: underline;">AberSheeran</a></p>
</footer>

</body>
<script src="/STATIC/script/jQuery.3.2.1.min.js"></script>
<script src="/STATIC/script/Vue.2.5.13.js"></script>
<script>
    //vue 渲染页面
    var blogs = new Vue({
        el:"section",
        data:{
            "blogs":[]
        }
    });

    $(window).ready(function(){
        $.ajax({
            type : "GET",
            url : "index.json",
            async : true,
            success:function(datas){
                for(var i=0; i<datas.length; i++){
                    blogs.blogs.push(datas[i]);
                }
            },
            error:function(){

            }
        });

        if($(window).width() > 1380){
            var num = parseInt(($(window).width() - 540)/340);
            $("section").css("column-count", num);
        }

        if($(window).width() <= 750){
            $("head").append('<link rel="stylesheet" media="(max-width: 750px)" href="/STATIC/css/blog.css">');
        }
        else if($(window).width() <= 1380){
            $("head").append('<link rel="stylesheet" media="(max-width: 1380px)" href="/STATIC/css/blog_md.css">');
        }
        else{
            $("head").append('<link rel="stylesheet" media="(min-width: 1380px)" href="/STATIC/css/blog_lg.css">');
        }

        $("style").append("article{display: inline-block;}");
        $("#loading").fadeOut(1);
    });

    $(window).resize(function(){
        if($(window).width() > 1380){
            var num = parseInt(($(window).width() - 540)/340);
            $("section").css("column-count", num);
        }
        else{
            $("section").css("column-count", "auto");
        }
    });
    //页面跳转
    $(document).on("click", "article summary", function(){
        window.open($(this).attr("href"));
    });
</script>

</html>
